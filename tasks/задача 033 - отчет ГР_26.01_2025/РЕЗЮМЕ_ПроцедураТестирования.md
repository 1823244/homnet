# Процедура тестирования показателей - Резюме

## Что было создано

### ✅ Процедура `ТестироватьВсеПоказатели()`

**Файл:** `Результат.bsl`  
**Расположение:** `#Область ВЫЧИСЛЕНИЕ_Показателей`

#### Назначение
Автоматический вызов всех функций вычисления показателей отчета ГР_26.01_2025 в режиме тестирования.

#### Синтаксис
```bsl
ТестироватьВсеПоказатели(НачалоПериода, КонецПериода, Организация, ВыводитьСообщения)
```

#### Параметры
- `НачалоПериода` (Дата) - Начало отчетного периода
- `КонецПериода` (Дата) - Конец отчетного периода  
- `Организация` (СправочникСсылка.Организации) - Организация для расчета
- `ВыводитьСообщения` (Булево, по умолчанию Истина) - Вывод результатов

#### Тестируемые показатели

| Строка | Описание | Колонки |
|--------|----------|---------|
| 1 | Кредиторская задолженность по ИТ-услугам | 3, 4 |
| 2 | Кредиторская задолженность по аренде помещений | 3, 4 |
| 3 | Кредиторская задолженность по услугам депозитария | 3, 4 |
| 10 | Итого кредиторская задолженность | 3, 4 |
| 19 | Кредиторская задолженность по прочим обязательствам | 3, 4 |
| 20 | Прочее | 3, 4 |

**Итого:** 6 строк × 2 колонки = **12 показателей**

## Как использовать

### Шаг 1: Создать показатели в режиме тестирования
```bsl
СоздатьОбновитьПоказатели(Истина, Истина);
```

### Шаг 2: Подключить обработку
```bsl
СсылкаОбработчика = Справочники.ДополнительныеОтчетыИОбработки
    .НайтиПоНаименованию("Отчет_ГР_26_01_2025", Истина);
ДополнительныеОтчетыИОбработки.ПодключитьВнешнююОбработку(СсылкаОбработчика);
ОбъектОбработки = ДополнительныеОтчетыИОбработки.ОбъектВнешнейОбработки(СсылкаОбработчика);
```

### Шаг 3: Запустить тестирование
```bsl
НачалоПериода = Дата(2025, 1, 1);
КонецПериода = Дата(2025, 9, 30);
Организация = Справочники.Организации.НайтиПоКоду("00-000001");

ОбъектОбработки.ТестироватьВсеПоказатели(НачалоПериода, КонецПериода, Организация, Истина);
```

## Пример вывода

```
╔════════════════════════════════════════════════════════════════════════╗
║  ТЕСТИРОВАНИЕ ВСЕХ ПОКАЗАТЕЛЕЙ ОТЧЕТА ГР_26.01_2025                   ║
╠════════════════════════════════════════════════════════════════════════╣
║  Период: 01.01.2025 - 30.09.2025                                      ║
║  Организация: ООО "Гранд"                                              ║
╚════════════════════════════════════════════════════════════════════════╝

┌────────────────────────────────────────────────────────────────────┐
│  СТРОКА  1                                                         │
├────────────────────────────────────────────────────────────────────┤
│  Колонка 3 (на 31.12.2024):                                       │
│    Значение:      1 234 567,89                                    │
│  Колонка 4 (на 30.09.2025):                                       │
│    Значение:      2 345 678,90                                    │
└────────────────────────────────────────────────────────────────────┘

... (аналогично для строк 2, 3, 10, 19, 20) ...

╔════════════════════════════════════════════════════════════════════════╗
║  ТЕСТИРОВАНИЕ ЗАВЕРШЕНО                                                ║
╚════════════════════════════════════════════════════════════════════════╝
```

## Особенности реализации

### ✅ Обработка ошибок
Каждый показатель вычисляется в блоке `Попытка...Исключение`:
```bsl
Попытка
    ЗначениеКол3 = ВычислитьПоказатель(НомерСтроки, 3, ...);
    Сообщить("│    Значение: " + Формат(ЗначениеКол3, ...));
Исключение
    Сообщить("│  Колонка 3: ОШИБКА - " + ОписаниеОшибки());
КонецПопытки;
```

### ✅ Автоматический режим тестирования
Последний параметр `ВычислитьПоказатель()` всегда = `Истина`:
- Используется счет 51 вместо 60311, 60320, 60322, 47403
- Используются тестовые банковские счета вместо контрагентов

### ✅ Красивое форматирование
- Таблица с рамками из псевдографики
- Выравнивание чисел с разделителями тысяч
- Два знака после запятой
- Группировка по строкам отчета

## Технические детали

### Структура цикла
```bsl
МассивСтрок = Новый Массив;
МассивСтрок.Добавить(1);
МассивСтрок.Добавить(2);
МассивСтрок.Добавить(3);
МассивСтрок.Добавить(10);
МассивСтрок.Добавить(19);
МассивСтрок.Добавить(20);

Для Каждого НомерСтроки Из МассивСтрок Цикл
    // Колонка 3 (31 декабря прошлого года)
    ЗначениеКол3 = ВычислитьПоказатель(НомерСтроки, 3, ...);
    
    // Колонка 4 (конец периода)
    ЗначениеКол4 = ВычислитьПоказатель(НомерСтроки, 4, ...);
КонецЦикла;
```

### Формат вывода чисел
```bsl
Формат(Значение, "ЧЦ=15; ЧДЦ=2; ЧРГ=' '; ЧН=0,00")
```
- `ЧЦ=15` - ширина поля 15 символов
- `ЧДЦ=2` - 2 знака после запятой
- `ЧРГ=' '` - пробел как разделитель тысяч
- `ЧН=0,00` - формат нуля

## Преимущества

✅ **Автоматизация** - один вызов тестирует все 12 показателей  
✅ **Наглядность** - результаты в удобочитаемом формате  
✅ **Безопасность** - все ошибки перехватываются  
✅ **Гибкость** - можно отключить вывод сообщений  
✅ **Режим тестирования** - использует тестовые данные  
✅ **Независимость** - не требует предварительной настройки  

## Использование в цикле разработки

### 1. Создание показателей
```bsl
СоздатьОбновитьПоказатели(Истина, Истина);
```

### 2. Создание тестовых проводок
```bsl
// Создать проводки по счету 51 
// с банковскими счетами ТЕСТ_Счет1_ИТУслуги и т.д.
```

### 3. Тестирование
```bsl
ОбъектОбработки.ТестироватьВсеПоказатели(...);
```

### 4. Анализ результатов
- Проверить значения показателей
- Убедиться в отсутствии ошибок
- Сравнить колонки 3 и 4

### 5. Корректировка (при необходимости)
- Изменить тестовые проводки
- Повторить тестирование

## Дополнительные возможности

### Вызов без вывода сообщений
```bsl
// Тихий режим - только вычисление без вывода
ОбъектОбработки.ТестироватьВсеПоказатели(
    НачалоПериода, 
    КонецПериода, 
    Организация, 
    Ложь  // Не выводить сообщения
);
```

### Программное получение результатов
Можно модифицировать процедуру, чтобы она возвращала таблицу значений:
```bsl
ТЗ = ТестироватьВсеПоказателиВТаблицу(...);
// Обработать результаты программно
```

## Рекомендации

1. **Перед первым запуском** убедитесь, что существует:
   - Организация с кодом `00-000001`
   - Счет 51 в плане счетов

2. **Для корректных результатов** создайте тестовые проводки:
   - По счету 51
   - С банковскими счетами ТЕСТ_Счет1, ТЕСТ_Счет2, ТЕСТ_Счет3, ТЕСТ_Счет4
   - На нужные даты

3. **Интерпретация результатов**:
   - Колонка 3 - должна показывать остаток на 31.12 прошлого года
   - Колонка 4 - должна показывать остаток на конец периода
   - Значения должны быть >= 0 (кредиторская задолженность)

## Связанная документация

- `ИНСТРУКЦИЯ_РежимТестирования.md` - Полная инструкция по режиму тестирования
- `Результат.bsl` - Исходный код процедуры

---

**Процедура готова к использованию! 🚀**
